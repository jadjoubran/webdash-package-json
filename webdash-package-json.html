<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="webdash-package-json">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <h1>Packages</h1>

    <h2>Dependencies</h2>
    <template is="dom-repeat" items="{{_getKeys(package.dependencies)}}">
      <div>{{item}}</div>
    </template>

    <h2>Dev dependencies</h2>
    <template is="dom-repeat" items="{{_getKeys(package.devDependencies)}}">
      <div>{{item}}</div>
    </template>
  </template>

  <script>
    /**
     * `webdash-package-json`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class WebdashPackageJson extends Polymer.Element {
      static get is() { return 'webdash-package-json'; }

      ready() {
        super.ready();

        //this will use a wrapper and then simply be `/package-json`
        fetch('/api/webdash-package-json/package-json')
          .then(response => response.json())
          .then(data => {
            if (data && data.package) {
              this.package = data.package;
            }
          })
          .catch(console.error);
      }

      _getKeys(object) {
        return Object.keys(object);

      }
    }

    window.customElements.define(WebdashPackageJson.is, WebdashPackageJson);
  </script>
</dom-module>